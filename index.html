<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Task Manager</title>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  </head>

  <body>
    <div id="root"></div>

    <script>
      const API_URL = "https://task-manager-backend-4cy6.onrender.com";

      function App() {
        const [tasks, setTasks] = React.useState([]);
        const [title, setTitle] = React.useState("");

        React.useEffect(() => {
          fetch(API_URL + "/tasks")
            .then(res => res.json())
            .then(data => setTasks(data));
        }, []);

        function addTask() {
          if (!title.trim()) return;

          fetch(API_URL + "/tasks", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ title })
          }).then(() => {
            setTitle("");
            return fetch(API_URL + "/tasks")
              .then(res => res.json())
              .then(data => setTasks(data));
          });
        }

        return React.createElement(
          "div",
          { style: { padding: "40px" } },
          React.createElement("h1", null, "Task Manager"),

          React.createElement("input", {
            value: title,
            placeholder: "Enter task",
            onChange: e => setTitle(e.target.value)
          }),

          React.createElement(
            "button",
            { onClick: addTask },
            "Add"
          ),

          React.createElement(
            "ul",
            null,
            tasks.map(t =>
              React.createElement("li", { key: t.id }, t.title)
            )
          )
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(React.createElement(App));
    </script>
  </body>
</html>
